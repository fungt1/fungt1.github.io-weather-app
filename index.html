<!DOCTYPE html>
<html>
    <head>
      <center>City Name is the most accurate for searching weather.</center>
    </head>
     <style>
    body {
  
 	background-position: center center;
	background-repeat:  no-repeat;
	background-attachment: fixed;
	background-size:  cover;
    color: white;
    text-shadow: 2px 2px 1px black;
    font-family: "Palatino Liontype", "Book Antique", Palatino, serif;
}
#weatherContainer {
	
    width: 60%;
    margin: auto;
    background-color: rgba(0, 0, 0, 0.25);
    box-shadow: 1px 1px 5px black;
    padding: 50px;
    border-radius: 10px;
    position: absolute;
    visibility: hidden;
  
}
#weatheContainer h1 {
    margin: 5px;
    font-size: 42px;
    font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
}
#searchContainer {
    padding: 15px;
    position: absolute;
    top: 0;
    right: 0;
}
#searchContainer input {
    width: 200px;
}
#searchContainer button {
    background-color: rgb(1, 159, 198);
    width: 75px;
}
.searchControl {
    box-shadow: 2px 2px 5px black;
    border: none;
    border-radius: 5px;
    padding: 5px;
}
#weatherMain {
    display: block;
    margin-block: 20px;
}
#weatherMain div {
    display: inline-block;
}
#weatherDescriptionHeader {
    font-size: 20px;
    vertical-align: 50%; 
}
#temperature {
    font-size: 38px;
    vertical-align: 25%;
}
.bottomDetails {
    display: block;
    font-size: 24px;
    text-align: right;
}
hr {
    margin-bottom: 20px;
}
/*new stuff*/
* {
  box-sizing: border-box;
  
  
}

body {
  font-family: Arial, Helvetica, sans-serif;
  
}

/* Float four columns side by side*/

/* Remove extra left and right margins, due to padding 
.row {margin: 0 -5px;}


/* Clear floats after the columns 
.row:after {
  content: "";
  display: table;
  clear: both;
}

/* Responsive columns */
@media screen and (max-width: 600px) {
  .card {
    width: 100%;
    display: block;
    margin-bottom: 20px;
  }
}

/* Style the counter cards */
.card {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
  padding: 16px;
  text-align: center;
  
}
/*Time*/
div#currentTime {
  font-size: 24px;
  padding: 10px 20px 0;
  
}
div#currentTime > div#date {
  font-size: 14px;
  margin: 0 auto;
  padding: 0 20px 5px;
  position: relative;
  text-align: right;
  top: -5px;
  width: fit-content;
}
/*Scroll function*/
:root {
  --gutter: 0px;
}

.column {
  display: grid;
  grid-gap: calc(var(--gutter) / 2);
  grid-template-columns: repeat(9, calc(20% - var(--gutter) * 2));
  
  overflow-x: scroll;
  scroll-snap-type: x proximity;
  padding-bottom: calc(.75 * var(--gutter));
  margin-bottom: calc(-.25 * var(--gutter));
}

/*Weather part*/
* {
  box-sizing: border-box;
}

body {
  font-family: Arial, Helvetica, sans-serif;
}

/* Create four equal columns that floats next to each other */
.C {
  float: left;
  width: 20%;
  padding: 10px;

}

/* Clear floats after the columns */
.B:after {
  content: "";
  display: table;
  clear: both;
}

/* Responsive columns */
@media screen and (max-width: 600px) {
  .B {
  
    width: 100%;
    display: block;
    margin-bottom: 20px;
  }
}

/* Style the counter cards */
.C {

  
  padding: 16px;
  text-align: center;

}

    </style>

    <body>

  <div id="currentTime"></div>
  <!--<div id="date"></div>-->
</div>

        <div id="searchContainer">
            <input class="searchControl" type="text" placeholder="City Name or Zipcode" id="searchInput">
            <button class="searchControl" id="searchBtn">Search</button>
        </div>
        <div id="weatherContainer">
            <div id ="weatherDescription">
                <h1 id ="cityHeader"></h1>
                <div id= "weatherMain">
                    <div id ="temperature"></div>
                    <div id="weatherDescriptionHeader"></div>
                    <div><img id ="documentIconImg"></div>
            </div>
            <hr>
            <div id ="windSpeed" class="bottomDetails"></div>
            <div id ="humidity" class="bottomDetails"></div>
            <div id ="sunrise" class="bottomDetails"></div>
            <div id= "sunset" class="bottomDetails"></div>
            
             </div>
  
  <div class="column">
    <div class="card">
      <h3 id = "firstHour"></h3>
      <p id = "tempHour1"></p>
      <p><img id ="iconImg1"></p>
    </div>
    <div class="card">
      <h3 id = "secondHour"></h3>
      <p id = "tempHour2"></p>
      <p><img id ="iconImg2"></p>
    </div>
     <div class="card">
      <h3 id = "thirdHour"></h3>
      <p id = "tempHour3"></p>
      <p><img id ="iconImg3"></p>
    </div>
    <div class="card">
      <h3 id = "forthHour"></h3>
      <p id = "tempHour4"></p>
      <p><img id ="iconImg4"></p>
    </div>
    <div class="card">
      <h3 id = "fifthHour"></h3>
      <p id = "tempHour5"></p>
      <p><img id ="iconImg5"></p>
    </div>
    <div class="card">
      <h3 id = "sixthHour"></h3>
      <p id = "tempHour6"></p>
      <p><img id ="iconImg6"></p>
    </div>
    <div class="card">
      <h3 id = "seventhHour"></h3>
      <p id = "tempHour7"></p>
      <p><img id ="iconImg7"></p>
    </div>
    <div class="card">
      <h3 id = "eigthHour"></h3>
      <p id = "tempHour8"></p>
      <p><img id ="iconImg8"></p>
    </div>
    <div class="card">
      <h3 id = "ninthHour"></h3>
      <p id = "tempHour9"></p>
      <p><img id ="iconImg9"></p>
    </div>
</div>



  <!--<div class="B">
    <div class="C">
      <h3 id = "date1"></h3>
      <p id = "t1"></p>
      <p><img id ="i1"></p>
    </div>


    <div class="C">
       <h3 id = "date2"></h3>
      <p id = "t2"></p>
      <p><img id ="i2"></p>
    </div>

  
  
    <div class="C">
      <h3 id = "date3"></h3>
      <p id = "t3"></p>
      <p><img id ="i3"></p>
    </div>

  
  
    <div class="C">
      <h3 id = "date4"></h3>
      <p id = "t4"></p>
      <p><img id ="i4"></p>
    </div>
 
    <div class="C">
       <h3 id = "date5"></h3>
      <p id = "t5"></p>
      <p><img id ="i5"></p>
   
  </div>
  </div>-->

 </body>
        
         <script>
let appId = 'b8e08a92f77fe0aba0b6883937d52d69';
let units = 'Imperial';
let searchMethod;
function getSearchMethod(searchTerm) {
    if(searchTerm.length === 5 && Number.parseInt(searchTerm) + '' === searchTerm)
        searchMethod = 'zip';
    else 
        searchMethod = 'q';
}
function searchWeather(searchTerm) {
    getSearchMethod(searchTerm);
    fetch(`https://api.openweathermap.org/data/2.5/weather?${searchMethod}=${searchTerm}&APPID=${appId}&units=${units}`).then(result => {
        return result.json();
    }).then(result => {
        init(result);
    })
}

    
function init(resultFromServer) {
    switch(resultFromServer.weather[0].main) {
        case 'Clear':
            document.body.style.backgroundImage = 'url("https://wallpapercave.com/wp/CqOvBFE.jpg")';
            break;
        case 'Clouds':
            document.body.style.backgroundImage = 'url("https://images.pexels.com/photos/158163/clouds-cloudporn-weather-lookup-158163.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260")';
            break;
        case 'Rain':
        case 'Drizzle':
        case 'Mist':
            document.body.style.backgroundImage = 'url("https://images.pexels.com/photos/39811/pexels-photo-39811.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260")';
            break;
        case 'ThunderStorm':
            document.body.style.backgroundImage = 'url("https://images.pexels.com/photos/53459/lightning-storm-weather-sky-53459.jpeg?auto=format%2Ccompress&cs=tinysrgb&dpr=2&h=750&w=1260")';
            break;
        
        case 'Snow':
            document.body.style.backgroundImage = 'url("https://images.pexels.com/photos/289649/pexels-photo-289649.jpeg?auto=format%2Ccompress&cs=tinysrgb&dpr=2&h=750&w=1260")';
            break;
        default:
            break;
    }
    
    
   
    let weatherDescriptionHeader = document.getElementById('weatherDescriptionHeader');
    let temperatureElement = document.getElementById('temperature');
    let humidityElement = document.getElementById('humidity');
    let sunriseElement = document.getElementById('sunrise');
    let sunsetElement = document.getElementById('sunset');
    let windSpeedElement = document.getElementById('windSpeed');
    let cityHeader = document.getElementById('cityHeader');
    let weatherIcon = document.getElementById('documentIconImg');
    weatherIcon.src = 'https://openweathermap.org/img/w/' + resultFromServer.weather[0].icon + '.png';
    let resultDescription = resultFromServer.weather[0].description;
    weatherDescriptionHeader.innerText = resultDescription.charAt(0).toUpperCase() + resultDescription.slice(1);
   
    temperatureElement.innerHTML = Math.floor(resultFromServer.main.temp) + '&#176'; 
    windSpeedElement.innerHTML = 'Winds at ' + Math.floor(resultFromServer.wind.speed) + ' m/s';
    cityHeader.innerHTML = resultFromServer.name;
    humidityElement.innerHTML = 'Humidity levels at ' + resultFromServer.main.humidity + '%';
    sunriseElement.innerHTML = 'Sunrise at ' + TimeStampCon(resultFromServer.sys.sunrise);
    sunsetElement.innerHTML = 'Sunset at ' +  TimeStampCon(resultFromServer.sys.sunset);
 
    setPositionForWeatherInfo();

}
function searchHourlyWeather(searchTerm) {
    getSearchMethod(searchTerm);
    fetch(`https://api.openweathermap.org/data/2.5/forecast?${searchMethod}=${searchTerm}&APPID=${appId}&units=${units}`).then(result => {
        return result.json();
    }).then(result => {
        linit(result);
    })
}
function linit(resultFromServer) {
    //conosle.log(resultFromServer);
     switch(resultFromServer.list.main) {
        case 'Clear':
           
            break;
        case 'Clouds':
           
            break;
        case 'Rain':
        case 'Drizzle':
        case 'Mist':
          
            break;
        case 'ThunderStorm':
           
            break;
        
        case 'Snow':
            
            break;
        default:
            break;
    }
   
 let firstHourElement = document.getElementById('firstHour');
 let tempElement1 = document.getElementById('tempHour1');
 let weatherIcon1 = document.getElementById('iconImg1');
 firstHourElement.innerHTML = TimeStampCon(resultFromServer.list[0].dt); 
 tempElement1.innerHTML = Math.floor(resultFromServer.list[0].main.temp) + '&#176';
 weatherIcon1.src = 'https://openweathermap.org/img/w/' + resultFromServer.list[0].weather[0].icon + '.png';
   
 let secondHourElement = document.getElementById('secondHour');
 let tempElement2 = document.getElementById('tempHour2');
 let weatherIcon2 = document.getElementById('iconImg2');
 secondHourElement.innerHTML = TimeStampCon(resultFromServer.list[1].dt); 
 tempElement2.innerHTML = Math.floor(resultFromServer.list[1].main.temp) + '&#176';
 weatherIcon2.src = 'https://openweathermap.org/img/w/' + resultFromServer.list[1].weather[0].icon + '.png';
 
 let thirdHourElement = document.getElementById('thirdHour');
 let tempElement3 = document.getElementById('tempHour3');
 let weatherIcon3 = document.getElementById('iconImg3');
 thirdHourElement.innerHTML = TimeStampCon(resultFromServer.list[2].dt); 
 tempElement3.innerHTML = Math.floor(resultFromServer.list[2].main.temp) + '&#176';
 weatherIcon3.src = 'https://openweathermap.org/img/w/' + resultFromServer.list[2].weather[0].icon + '.png';
 
 let forthHourElement = document.getElementById('forthHour');
 let tempElement4 = document.getElementById('tempHour4');
 let weatherIcon4 = document.getElementById('iconImg4');
 forthHourElement.innerHTML = TimeStampCon(resultFromServer.list[3].dt); 
 tempElement4.innerHTML = Math.floor(resultFromServer.list[3].main.temp) + '&#176';
 weatherIcon4.src = 'https://openweathermap.org/img/w/' + resultFromServer.list[3].weather[0].icon + '.png';
 
 let fifthHourElement = document.getElementById('fifthHour');
 let tempElement5 = document.getElementById('tempHour5');
 let weatherIcon5 = document.getElementById('iconImg5');
 fifthHourElement.innerHTML = TimeStampCon(resultFromServer.list[4].dt); 
 tempElement5.innerHTML = Math.floor(resultFromServer.list[4].main.temp) + '&#176';
 weatherIcon5.src = 'https://openweathermap.org/img/w/' + resultFromServer.list[4].weather[0].icon + '.png';
 
 let sixthHourElement = document.getElementById('sixthHour');
 let tempElement6 = document.getElementById('tempHour6');
 let weatherIcon6 = document.getElementById('iconImg6');
 sixthHourElement.innerHTML = TimeStampCon(resultFromServer.list[5].dt); 
 tempElement6.innerHTML = Math.floor(resultFromServer.list[5].main.temp) + '&#176';
 weatherIcon6.src = 'https://openweathermap.org/img/w/' + resultFromServer.list[5].weather[0].icon + '.png';
 
 let seventhHourElement = document.getElementById('seventhHour');
 let tempElement7 = document.getElementById('tempHour7');
 let weatherIcon7 = document.getElementById('iconImg7');
 seventhHourElement.innerHTML = TimeStampCon(resultFromServer.list[6].dt); 
 tempElement7.innerHTML = Math.floor(resultFromServer.list[6].main.temp) + '&#176';
 weatherIcon7.src = 'https://openweathermap.org/img/w/' + resultFromServer.list[6].weather[0].icon + '.png';
 
 let eigthHourElement = document.getElementById('eigthHour');
 let tempElement8 = document.getElementById('tempHour8');
 let weatherIcon8 = document.getElementById('iconImg8');
 eigthHourElement.innerHTML = TimeStampCon(resultFromServer.list[7].dt); 
 tempElement8.innerHTML = Math.floor(resultFromServer.list[7].main.temp) + '&#176';
 weatherIcon8.src = 'https://openweathermap.org/img/w/' + resultFromServer.list[7].weather[0].icon + '.png';
 
 let ninthHourElement = document.getElementById('ninthHour');
 let tempElement9 = document.getElementById('tempHour9');
 let weatherIcon9 = document.getElementById('iconImg9');
 ninthHourElement.innerHTML = TimeStampCon(resultFromServer.list[8].dt); 
 tempElement9.innerHTML = Math.floor(resultFromServer.list[8].main.temp) + '&#176';
 weatherIcon9.src = 'https://openweathermap.org/img/w/' + resultFromServer.list[8].weather[0].icon + '.png';
 
/* let firstDayElement = document.getElementById('date1');
 let temp1 = document.getElementById('t1');
 let weather1 = document.getElementById('i1');
 firstDayElement.innerHTML = getDayName(resultFromServer.list[5].dt_txt); 
 temp1.innerHTML = Math.floor(resultFromServer.list[5].main.temp) + '&#176';
 weather1.src = 'https://openweathermap.org/img/w/' + resultFromServer.list[5].weather[0].icon + '.png';
 
 
 let secondDayElement = document.getElementById('date2');
 let temp2 = document.getElementById('t2');
 let weather2 = document.getElementById('i2');
 secondDayElement.innerHTML = getDayName(resultFromServer.list[13].dt_txt); 
 temp2.innerHTML = Math.floor(resultFromServer.list[13].main.temp) + '&#176';
 weather2.src = 'https://openweathermap.org/img/w/' + resultFromServer.list[13].weather[0].icon + '.png';
 
 let thirdDayElement = document.getElementById('date3');
 let temp3 = document.getElementById('t3');
 let weather3 = document.getElementById('i3');
 thirdDayElement.innerHTML = getDayName(resultFromServer.list[21].dt_txt); 
 temp3.innerHTML = Math.floor(resultFromServer.list[21].main.temp) + '&#176';
 weather3.src = 'https://openweathermap.org/img/w/' + resultFromServer.list[21].weather[0].icon + '.png';
 
 let forthDayElement = document.getElementById('date4');
 let temp4 = document.getElementById('t4');
 let weather4 = document.getElementById('i4');
 forthDayElement.innerHTML = getDayName(resultFromServer.list[29].dt_txt); 
 temp4.innerHTML = Math.floor(resultFromServer.list[29].main.temp) + '&#176';
 weather4.src = 'https://openweathermap.org/img/w/' + resultFromServer.list[29].weather[0].icon + '.png';
 
 let fifthDayElement = document.getElementById('date5');
 let temp5 = document.getElementById('t5');
 let weather5 = document.getElementById('i5');
 fifthDayElement.innerHTML = getDayName(resultFromServer.list[37].dt_txt); 
 temp5.innerHTML = Math.floor(resultFromServer.list[37].main.temp) + '&#176';
 weather5.src = 'https://openweathermap.org/img/w/' + resultFromServer.list[37].weather[0].icon + '.png';*/
   
   
 }
document.getElementById('searchBtn').addEventListener('click', () => {
    let searchTerm = document.getElementById('searchInput').value;
    if(searchTerm) 
        searchHourlyWeather(searchTerm);
 })


window.setInterval('datetime()', 1000);

function datetime() {
  var time   = new Date ();
  document.getElementById('date').innerHTML =
    time.getDate() + '.' + (time.getMonth() + 1) + '.' + time.getFullYear();
}

function TimeStampCon(t)
{
let dt = new Date(t*1000);
let hr = dt.getHours();
let ampm = hr >= 12 ? 'pm' : 'am';
if (hr > 12) {
    hr -= 12;
} else if (hr === 0) {
   hr = 12;
}
let m = "0" + dt.getMinutes();
return hr+ ':' + m.substr(-2) + ampm;  
}

function getDayName(dateStr, locale)
{
    var date = new Date(dateStr);
    return date.toLocaleDateString(locale, { weekday: 'long' });        
}

function setPositionForWeatherInfo() {
    let weatherContainer = document.getElementById('weatherContainer');
    let weatherContainerHeight = weatherContainer.clientHeight;
    let weatherContainerWidth = weatherContainer.clientWidth;
    weatherContainer.style.left = `calc(50% - ${weatherContainerWidth/2}px)`;
    weatherContainer.style.top = `calc(50% - ${weatherContainerHeight/1.3}px)`;
    weatherContainer.style.visibility = 'visible';
}
document.getElementById('searchBtn').addEventListener('click', () => {
    let searchTerm = document.getElementById('searchInput').value;
    if(searchTerm) 
        searchWeather(searchTerm);
    
})
   
var currentTime = new Date().getHours();
if (currentTime > 19 || currentTime < 6) {
    if (document.body) {
        document.body.background = "https://www.nps.gov/shen/learn/nature/images/20170922_BigMeadows_Night_DSC5591_mo.jpg?maxwidth=1200&maxheight=1200&autorotate=false";
    }
}
else if (currentTime > 16 && currentTime < 19) {
    if (document.body) {
        document.body.background = "https://upload.wikimedia.org/wikipedia/commons/5/58/Sunset_2007-1.jpg";
    }
}
else {
    if (document.body) {
        document.body.background = "https://jooinn.com/images/trees-and-grass-field-under-cloudy-sky-during-daytime.jpg";
    }
}

window.onload = function() {
  clock();  
    function clock() {
    var now = new Date();
    var TwentyFourHour = now.getHours();
    var hour = now.getHours();
    var min = now.getMinutes();
    var mid = 'pm';
    if (min < 10) {
      min = "0" + min;
    }
    if (hour > 12) {
      hour = hour - 12;
    }    
    if(hour==0){ 
      hour=12;
    }
    if(TwentyFourHour < 12) {
       mid = 'am';
    }     
  document.getElementById('currentTime').innerHTML =     hour+':'+min+' '+mid ;
    setTimeout(clock, 1000);
    }
}


</script>
    
</html>
