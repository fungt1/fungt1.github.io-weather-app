<!DOCTYPE html>
<html>
    <head>
      
    </head>
     <style>
    body {
   
   background:  url('https://images.pexels.com/photos/5412/water-blue-ocean.jpg?auto=format%2Ccompress&cs=tinysrgb&dpr=2&h=750&w=1260') no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
    color: white;
    text-shadow: 2px 2px 1px black;
    font-family: "Palatino Liontype", "Book Antique", Palatino, serif;
}
#weatherContainer {
    background-color: rgba(0, 0, 0, 0.25);
    box-shadow: 1px 1px 5px black;
    padding: 50px;
    border-radius: 10px;
    position: absolute;
    visibility: hidden;
  
}
#weatheContainer h1 {
    margin: 5px;
    font-size: 42px;
    font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
}
#searchContainer {
    padding: 15px;
    position: absolute;
    top: 0;
    right: 0;
}
#searchContainer input {
    width: 200px;
}
#searchContainer button {
    background-color: rgb(1, 159, 198);
    width: 75px;
}
.searchControl {
    box-shadow: 2px 2px 5px black;
    border: none;
    border-radius: 5px;
    padding: 5px;
}
#weatherMain {
    display: block;
    margin-block: 20px;
}
#weatherMain div {
    display: inline-block;
}
#weatherDescriptionHeader {
    font-size: 20px;
    vertical-align: 50%; 
}
#temperature {
    font-size: 38px;
    vertical-align: 25%;
}
.bottomDetails {
    display: block;
    font-size: 24px;
    text-align: right;
}
hr {
    margin-bottom: 20px;
}
    </style>

    <body>
    

        <div id="searchContainer">
            <input class="searchControl" type="text" placeholder="City Name or Zipcode" id="searchInput">
            <button class="searchControl" id="searchBtn">Search</button>
        </div>
        <div class="about-header">
        <h1 class="about-header__title">Zip code is a work in progress. City name is preferred</h1>
    </div>
        <div id="weatherContainer">
            <div id ="weatherDescription">
                <h1 id ="cityHeader"></h1>
                <div id= "weatherMain">
                    <div id ="temperature"></div>
                    <div id="weatherDescriptionHeader"></div>
                    <div><img id ="documentIconImg"></div>
            </div>
            <hr>
            <div id ="windSpeed" class="bottomDetails"></div>
            <div id ="humidity" class="bottomDetails"></div>
            <div id ="sunrise" class="bottomDetails"></div>
            <div id= "sunset" class="bottomDetails"></div>
        </div>
     
        </div>
        
         <script>
let appId = 'b8e08a92f77fe0aba0b6883937d52d69';
let units = 'Imperial';
let searchMethod;
function getSearchMethod(searchTerm) {
    if(searchTerm.length === 5 && Number.parseInt(searchTerm) + '' === searchTerm)
        searchMethod = 'zip';
    else 
        searchMethod = 'q';
}
function searchWeather(searchTerm) {
    getSearchMethod(searchTerm);
    fetch(`https://api.openweathermap.org/data/2.5/weather?${searchMethod}=${searchTerm}&APPID=${appId}&units=${units}`).then(result => {
        return result.json();
    }).then(result => {
        init(result);
    })
}
function init(resultFromServer) {
    switch(resultFromServer.weather[0].main) {
        case 'Clear':
            document.body.style.backgroundImage = 'url("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTLJ23FwGgTXGECa2mRH43KOdjN0W6NJWiRG7bhgTiA-VHnmSGB")';
            break;
        case 'Clouds':
            document.body.style.backgroundImage = 'url("https://images.pexels.com/photos/158163/clouds-cloudporn-weather-lookup-158163.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260")';
            break;
        case 'Rain':
        case 'Drizzle':
        case 'Mist':
            document.body.style.backgroundImage = 'url("https://images.pexels.com/photos/39811/pexels-photo-39811.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260")';
            break;
        case 'ThunderStorm':
            document.body.style.backgroundImage = 'url("https://images.pexels.com/photos/53459/lightning-storm-weather-sky-53459.jpeg?auto=format%2Ccompress&cs=tinysrgb&dpr=2&h=750&w=1260")';
            break;
        
        case 'Snow':
            document.body.style.backgroundImage = 'url("https://images.pexels.com/photos/289649/pexels-photo-289649.jpeg?auto=format%2Ccompress&cs=tinysrgb&dpr=2&h=750&w=1260")';
            break;
        default:
            break;
    }
  
    let weatherDescriptionHeader = document.getElementById('weatherDescriptionHeader');
    let temperatureElement = document.getElementById('temperature');
    let humidityElement = document.getElementById('humidity');
    let sunriseElement = document.getElementById('sunrise');
    let sunsetElement = document.getElementById('sunset');
    let windSpeedElement = document.getElementById('windSpeed');
    let cityHeader = document.getElementById('cityHeader');
    let weatherIcon = document.getElementById('documentIconImg');
    weatherIcon.src = 'https://openweathermap.org/img/w/' + resultFromServer.weather[0].icon + '.png';
    let resultDescription = resultFromServer.weather[0].description;
    weatherDescriptionHeader.innerText = resultDescription.charAt(0).toUpperCase() + resultDescription.slice(1);
   
    temperatureElement.innerHTML = Math.floor(resultFromServer.main.temp) + '&#176'; 
    windSpeedElement.innerHTML = 'Winds at ' + Math.floor(resultFromServer.wind.speed) + ' m/s';
    cityHeader.innerHTML = resultFromServer.name;
    humidityElement.innerHTML = 'Humidity levels at ' + resultFromServer.main.humidity + '%';
    sunriseElement.innerHTML = 'Sunrise at ' + TimeStampCon(resultFromServer.sys.sunrise) + 'am';
    sunsetElement.innerHTML = 'Sunset at ' +  TimeStampCon(resultFromServer.sys.sunset) + 'pm';
    setPositionForWeatherInfo();

}
function TimeStampCon(t)
{
let dt = new Date(t*1000);
let hr = dt.getHours();
if (hr > 12) {
    hr -= 12;
} else if (hr === 0) {
   hr = 12;
}
let m = "0" + dt.getMinutes();
return hr+ ':' + m.substr(-2);  
}



function setPositionForWeatherInfo() {
    let weatherContainer = document.getElementById('weatherContainer');
    let weatherContainerHeight = weatherContainer.clientHeight;
    let weatherContainerWidth = weatherContainer.clientWidth;
    weatherContainer.style.left = `calc(50% - ${weatherContainerWidth/2}px)`;
    weatherContainer.style.top = `calc(50% - ${weatherContainerHeight/1.3}px)`;
    weatherContainer.style.visibility = 'visible';
}
document.getElementById('searchBtn').addEventListener('click', () => {
    let searchTerm = document.getElementById('searchInput').value;
    if(searchTerm) 
        searchWeather(searchTerm);
    
})
    </script>
    </body>
    
</html>
